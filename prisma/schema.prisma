// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model products {
  id          Int    @id @default(autoincrement())
  name        String
  description String
  img         String
  price       Float
  properties  String
}

model orders {
  id                  Int                @id @default(autoincrement())
  product_id          Int
  authorId            Int
  customer_name       String
  TenHang             String
  img                 String
  price               Float
  TrangThai           String
  SoLuong             Int
  published           Boolean            @default(false)
  ThongTinThanhToan   ThongTinThanhToan? @relation(fields: [thongTinThanhToanId], references: [id])
  thongTinThanhToanId Int?
}

model ThongTinThanhToan {
  id                  Int      @id @default(autoincrement())
  product_id          Int
  NguoiLam            String
  KhachHang           String
  Phone_Number        String
  Address             String
  order_date          DateTime
  authorId            Int
  TrangThai           String
  TongTienChuaGiamGia Float
  Thue                Float
  GiamGiaCombo        Float
  TongTienSauGiam     Float
  orders              orders[]
}

model customer {
  id            Int    @id @default(autoincrement())
  customer_name String
  Phone_Number  String
  Address       String
  Note          String
}

model KhachHangDaMua {
  id           Int    @id @default(autoincrement())
  name         String
  Number       String
  Address      String
  Author_email String
  Note         String
}

model ChamCong {
  id      Int    @id @default(autoincrement())
  MaQR    String
  Email   String
  GioVao  String
  GioRa   String
  date    String
  User    User?  @relation(fields: [user_id], references: [id])
  user_id Int?
}

model User {
  id            Int             @id @default(autoincrement())
  email         String          @unique
  pass          String?
  img           String
  token         String
  refreshToken  String
  chamcong      ChamCong[]
  khohangcanhan KhoHangCaNhan[]
}

model KhoHangCaNhan {
  id        Int    @id @default(autoincrement())
  TenHang   String
  SoLuong   Int
  TrangThai String
  User      User?  @relation(fields: [user_id], references: [id])
  user_id   Int?
}
